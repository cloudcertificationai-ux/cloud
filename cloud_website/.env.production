# =============================================================================
# ANYWHEREDOOR STUDENT APP - PRODUCTION ENVIRONMENT
# =============================================================================
# SECURITY WARNING: Never commit this file to version control!
# Keep all credentials secure and rotate them regularly.
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Production PostgreSQL Database (Neon, Supabase, AWS RDS, etc.)
DATABASE_URL="postgresql://username:password@production-host:5432/anywheredoor_prod?sslmode=require&channel_binding=require"
DIRECT_DATABASE_URL="postgresql://username:password@production-host:5432/anywheredoor_prod?sslmode=require&channel_binding=require"

# Connection Pool Settings (adjust based on your hosting plan)
# DATABASE_POOL_MIN=2
# DATABASE_POOL_MAX=10
# DATABASE_POOL_TIMEOUT=30000

# -----------------------------------------------------------------------------
# APPLICATION URLS
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL="https://app.anywheredoor.com"
NEXTAUTH_URL="https://app.anywheredoor.com"
ADMIN_PANEL_URL="https://admin.anywheredoor.com"

# -----------------------------------------------------------------------------
# NEXTAUTH CONFIGURATION
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="REPLACE_WITH_SECURE_RANDOM_STRING_MIN_32_CHARS"

# Session Configuration
SESSION_MAX_AGE=2592000
SESSION_UPDATE_AGE=86400

# -----------------------------------------------------------------------------
# AUTH0 CONFIGURATION
# -----------------------------------------------------------------------------
# Production Auth0 Application Credentials
AUTH0_DOMAIN="your-production-tenant.auth0.com"
AUTH0_CLIENT_ID="your-production-auth0-client-id"
AUTH0_CLIENT_SECRET="your-production-auth0-client-secret"
AUTH0_ISSUER="https://your-production-tenant.auth0.com"

# Auth0 Management API (for user management)
# AUTH0_MANAGEMENT_CLIENT_ID="your-management-api-client-id"
# AUTH0_MANAGEMENT_CLIENT_SECRET="your-management-api-client-secret"

# -----------------------------------------------------------------------------
# OAUTH PROVIDERS (via Auth0)
# -----------------------------------------------------------------------------
# Google OAuth
GOOGLE_CLIENT_ID="your-production-google-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-production-google-client-secret"

# Apple Sign In
APPLE_ID="your-production-apple-service-id"
APPLE_SECRET="your-production-apple-secret"

# -----------------------------------------------------------------------------
# STRIPE PAYMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Production Stripe Keys
STRIPE_SECRET_KEY="sk_live_REPLACE_WITH_PRODUCTION_KEY"
STRIPE_PUBLISHABLE_KEY="pk_live_REPLACE_WITH_PRODUCTION_KEY"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_live_REPLACE_WITH_PRODUCTION_KEY"

# Stripe Webhook Secret (from Stripe Dashboard)
STRIPE_WEBHOOK_SECRET="whsec_REPLACE_WITH_PRODUCTION_WEBHOOK_SECRET"

# Stripe Configuration
STRIPE_CURRENCY="usd"
STRIPE_SUCCESS_URL="https://app.anywheredoor.com/payment/success"
STRIPE_CANCEL_URL="https://app.anywheredoor.com/payment/cancel"

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 STORAGE (Media Storage)
# -----------------------------------------------------------------------------
# Cloudflare Account and R2 Credentials
R2_ACCOUNT_ID="your-cloudflare-account-id"
R2_ACCESS_KEY_ID="your-production-r2-access-key-id"
R2_SECRET_ACCESS_KEY="your-production-r2-secret-access-key"
R2_BUCKET_NAME="anywheredoor-production-media"

# Public CDN Domain (custom domain or R2.dev subdomain)
R2_PUBLIC_DOMAIN="https://cdn.anywheredoor.com"
NEXT_PUBLIC_CDN_DOMAIN="https://cdn.anywheredoor.com"

# -----------------------------------------------------------------------------
# CLOUDFLARE SIGNED URLS (Secure Video Playback)
# -----------------------------------------------------------------------------
# For enrollment-verified, time-limited video access
CLOUDFLARE_ACCOUNT_ID="your-cloudflare-account-id"
CLOUDFLARE_KEY_PAIR_ID="your-production-key-pair-id"
# Base64-encoded private key: cat private-key.pem | base64 | tr -d '\n'
CLOUDFLARE_PRIVATE_KEY="your-base64-encoded-private-key"

# Signed URL Configuration
SIGNED_URL_EXPIRY_SECONDS=3600
SIGNED_URL_IP_RESTRICTION=false

# -----------------------------------------------------------------------------
# VIDEO CONFIGURATION
# -----------------------------------------------------------------------------
# Enable video watermarking with user email (requires ffmpeg)
ENABLE_VIDEO_WATERMARKING="true"

# Video Processing Settings
VIDEO_MAX_SIZE_MB=500
VIDEO_ALLOWED_FORMATS="mp4,webm,mov"
VIDEO_TRANSCODE_QUALITY="high"

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (Caching & Rate Limiting)
# -----------------------------------------------------------------------------
# Production Redis Instance (Upstash, Redis Cloud, AWS ElastiCache, etc.)
REDIS_URL="rediss://username:password@production-redis-host:6379"
REDIS_TLS_ENABLED="true"

# Redis Configuration
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000

# -----------------------------------------------------------------------------
# CORS & SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
ALLOWED_ORIGINS="https://app.anywheredoor.com,https://admin.anywheredoor.com"
ADMIN_ALLOWED_ORIGINS="https://admin.anywheredoor.com"

# Content Security Policy
CSP_REPORT_URI="https://app.anywheredoor.com/api/csp-report"

# -----------------------------------------------------------------------------
# API KEYS (Admin Panel Communication)
# -----------------------------------------------------------------------------
# Generate with: node scripts/generate-api-key.ts
API_KEY="ak_live_REPLACE_WITH_GENERATED_API_KEY"
API_SECRET="sk_live_REPLACE_WITH_GENERATED_API_SECRET"

# API Rate Limiting
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION (Transactional Emails)
# -----------------------------------------------------------------------------
# SMTP Configuration (SendGrid, AWS SES, Postmark, etc.)
SMTP_HOST="smtp.sendgrid.net"
SMTP_PORT=587
SMTP_SECURE="false"
SMTP_USER="apikey"
SMTP_PASS="your-sendgrid-api-key"
SMTP_FROM_EMAIL="noreply@anywheredoor.com"
SMTP_FROM_NAME="AnyWhereDoor"

# Email Templates
EMAIL_WELCOME_TEMPLATE_ID="d-welcome-template-id"
EMAIL_ENROLLMENT_TEMPLATE_ID="d-enrollment-template-id"
EMAIL_COMPLETION_TEMPLATE_ID="d-completion-template-id"

# -----------------------------------------------------------------------------
# MONITORING & LOGGING
# -----------------------------------------------------------------------------
# Sentry Error Tracking
SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
SENTRY_ENVIRONMENT="production"
SENTRY_TRACES_SAMPLE_RATE=0.1

# Log Configuration
LOG_LEVEL="info"
LOG_FORMAT="json"
ENABLE_REQUEST_LOGGING="true"

# -----------------------------------------------------------------------------
# ANALYTICS & TRACKING
# -----------------------------------------------------------------------------
# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID="G-XXXXXXXXXX"

# Mixpanel (optional)
# NEXT_PUBLIC_MIXPANEL_TOKEN="your-mixpanel-token"

# Hotjar (optional)
# NEXT_PUBLIC_HOTJAR_ID="your-hotjar-id"

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_COURSE_REVIEWS="true"
ENABLE_SOCIAL_SHARING="true"
ENABLE_CERTIFICATES="true"
ENABLE_LIVE_LESSONS="true"
ENABLE_AR_LESSONS="true"
ENABLE_ASSIGNMENTS="true"

# -----------------------------------------------------------------------------
# PERFORMANCE & OPTIMIZATION
# -----------------------------------------------------------------------------
# Next.js Configuration
NEXT_TELEMETRY_DISABLED=1
NODE_ENV="production"

# Image Optimization
NEXT_PUBLIC_IMAGE_DOMAINS="cdn.anywheredoor.com,*.r2.dev"
IMAGE_OPTIMIZATION_QUALITY=80

# -----------------------------------------------------------------------------
# ADMIN USER (Initial Setup Only)
# -----------------------------------------------------------------------------
# Used for database seeding - remove after initial setup
ADMIN_EMAIL="admin@anywheredoor.com"
ADMIN_NAME="Admin User"

# -----------------------------------------------------------------------------
# BACKUP & MAINTENANCE
# -----------------------------------------------------------------------------
# Maintenance Mode
MAINTENANCE_MODE="false"
MAINTENANCE_MESSAGE="We're performing scheduled maintenance. We'll be back soon!"

# Backup Configuration
# BACKUP_ENABLED="true"
# BACKUP_SCHEDULE="0 2 * * *"
# BACKUP_RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# COMPLIANCE & LEGAL
# -----------------------------------------------------------------------------
# GDPR Compliance
ENABLE_COOKIE_CONSENT="true"
ENABLE_DATA_EXPORT="true"
DATA_RETENTION_DAYS=365

# Terms & Privacy
TERMS_URL="https://anywheredoor.com/terms"
PRIVACY_URL="https://anywheredoor.com/privacy"

# -----------------------------------------------------------------------------
# DEPLOYMENT INFORMATION
# -----------------------------------------------------------------------------
# Deployment metadata (auto-populated by CI/CD)
# VERCEL_URL="auto-populated-by-vercel"
# VERCEL_ENV="production"
# COMMIT_SHA="auto-populated-by-ci"
# BUILD_ID="auto-populated-by-ci"
